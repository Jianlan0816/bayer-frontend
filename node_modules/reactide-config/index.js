const fs = require('fs')

module.exports = {
  config: () => {
    fs.createReadStream('./node_modules/reactide-config/reactide.config.js').pipe(fs.createWriteStream('./reactide.config.js'));
    let file = JSON.parse(fs.readFileSync('./package.json'));
    let script = 'webpack-dev-server --config reactide.config.js --mode development --hot';
    file.scripts['reactide-server'] = script;
    file.devDependencies['webpack'] = '^4.33.0';
    file.devDependencies['webpack-cli'] = '^3.3.2';
    file.devDependencies['webpack-dev-server'] = '^3.7.0';
    file.devDependencies['html-webpack-plugin'] = '^3.2.0';
    file.devDependencies['@babel/cli'] = '^7.0.0-beta.40';
    file.devDependencies['@babel/core'] = '^7.0.0-beta.40';
    file.devDependencies['@babel/plugin-proposal-class-properties'] = '^7.4.4';
    file.devDependencies['@babel/plugin-transform-runtime'] = '^7.4.4';
    file.devDependencies['@babel/preset-env'] = '^7.4.5';
    file.devDependencies['@babel/preset-react'] = '^7.0.0-beta.0';
    file.devDependencies['babel-loader'] = '^8.0.0-beta.0';
    file.devDependencies['css-loader'] = '^2.1.1';
    file.devDependencies['file-loader'] = '^4.0.0';
    file.devDependencies['node-sass'] = '^4.12.0';
    file.devDependencies['sass-loader'] = '^7.1.0';
    file.devDependencies['style-loader'] = '^0.23.1';
    file.devDependencies['url-loader'] = '^2.0.0';
  
    let string = JSON.stringify(file, null, 2);
    fs.writeFileSync('package.json', string)
  }
}